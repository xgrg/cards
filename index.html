<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="js/animate.css">
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,400" rel="stylesheet">
</head>
<body>
  <button id="request" style="opacity:0">Request document</button>
  <div id="orientation" style="opacity:0"></div>
  <audio loop=true autoplay=true> </audio>
  <div id="bodybox">

  </div>

  <script src="js/jquery-2.2.0.min.js"></script>
  <script src="js/screenfull.min.js"></script>
  <script src="js/responsive.js"></script>

  <script type="text/javascript">

    var vartable = {'@action':'start'};
    var cards_to_play = [];
    var storylets = [];
    var scenefile = '';
    var audio = '';
    var fullscreen = 0;
    var accelerate = false;
    var card_in_progress = false;

  </script>
  <script src="js/base.js"></script>
  <script src="js/scene.js"></script>
  <script>
  // MAIN FUNCTION

  $( document ).ready(function() {

    var f = QueryString.f;
    var b64 = QueryString.d;
    fullscreen = parseInt(QueryString.fs);
    accelerate = (parseInt(QueryString.fast) == 1);


    console.log('file ' + f)
    if (b64 !== undefined){
      d = Base64.decode(decodeURIComponent(escape(b64)));
      d = d.replaceAll('\0', '')
      console.log(d)
      vartable = JSON.parse(d);
    }
    if (f===undefined){ f = 'story'}
    scenefile = f;
    preload(function(){
       loadScript('md/'+f+'.js', run_machine)
    });
  });
  </script>

</body>
</html>
